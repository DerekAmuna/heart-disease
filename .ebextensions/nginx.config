# .ebextensions/nginx.config
files:
  /etc/nginx/conf.d/proxy_custom.conf:
    mode: "000644"
    owner: root
    group: root
    content: |
      # Client body handling
      client_max_body_size 40M;
      client_body_buffer_size 1M;

      # Proxy buffering
      proxy_buffer_size 16k;
      proxy_buffers 8 1M;
      proxy_busy_buffers_size 2M;
      proxy_temp_file_write_size 2M;

      # Timeouts
      proxy_read_timeout 300;
      proxy_connect_timeout 300;
      proxy_send_timeout 300;
      keepalive_timeout 300;

      # Hash optimizations
      types_hash_max_size 2048;
      types_hash_bucket_size 128;
      proxy_headers_hash_max_size 2048;
      server_names_hash_bucket_size 128;
